// 上海地铁站点数据
const SHANGHAI_METRO = {
    lines: {
        1: {
            name: '1号线',
            color: '#E3002B',
            stations: ['富锦路', '友谊西路', '宝安公路', '共富新村', '呼兰路', '通河新村', '共康路', '彭浦新村', '汶水路', '上海马戏城', '延长路', '中山北路', '火车站', '汉中路', '黄陂南路', '人民广场', '新闸路', '陕西南路', '黄山路', '徐家汇', '上海体育馆', '漕宝路', '上海南站', '锦江乐园', '莲花路', '外环路', '莘庄']
        },
        2: {
            name: '2号线',
            color: '#36A9E1',
            stations: ['徐泾东', '虹桥火车站', '虹桥2号航站楼', '淞虹路', '北新泾', '威宁路', '娄山关路', '中山公园', '江苏路', '静安寺', '南京西路', '人民广场', '南京东路', '陆家嘴', '东昌路', '世纪大道', '上海科技馆', '世纪公园', '龙阳路', '张江高科']
        },
        3: {
            name: '3号线',
            color: '#FFD800',
            stations: ['上海南站', '石龙路', '龙漕路', '漕溪路', '宜山路', '虹桥路', '延安西路', '中山公园', '金沙江路', '曹杨路', '镇坪路', '中潭路', '上海火车站', '宝山路', '东宝兴路', '虹口足球场', '赤峰路', '大柏树', '江湾镇', '殷高西路', '长江南路', '淞发路', '张华浜', '淞滨路', '水产路', '宝杨路', '友谊路', '铁力路', '江杨北路']
        },
        4: {
            name: '4号线',
            color: '#5F259F',
            stations: ['宜山路', '虹桥路', '延安西路', '中山公园', '金沙江路', '曹杨路', '镇坪路', '中潭路', '上海火车站', '宝山路', '海伦路', '临平路', '大连路', '杨树浦路', '浦东大道', '世纪大道', '浦电路', '蓝村路', '塘桥', '南浦大桥', '西藏南路', '鲁班路', '大木桥路', '东安路', '上海体育场']
        },
        5: {
            name: '5号线',
            color: '#8BC53F',
            stations: ['莘庄', '春申路', '银都路', '颛桥', '北桥', '剑川路', '东川路', '金平路', '华宁路', '文井路', '闵行开发区', '江川路', '西渡', '萧塘', '奉浦大道', '环城东路', '望园路', '金海湖', '奉贤新城']
        },
        6: {
            name: '6号线',
            color: '#D9027D',
            stations: ['港城路', '外高桥保税区北', '航津路', '外高桥保税区南', '洲海路', '五洲大道', '东靖路', '巨峰路', '五莲路', '博兴路', '金桥路', '云山路', '德平路', '北洋泾路', '民生路', '源深体育中心', '世纪大道', '浦电路', '蓝村路', '上海儿童医学中心', '临沂新村', '凌兆新村', '成山路', '杨思', '高青路', '东明路', '高科西路', '锦绣路', '芳华路', '花木路']
        },
        7: {
            name: '7号线',
            color: '#F47920',
            stations: ['美兰湖', '罗南新村', '潘广路', '刘行', '顾村公园', '祁华路', '上海大学', '南陈路', '上大路', '场中路', '大场镇', '行知路', '大华三路', '新村路', '岚皋路', '镇坪路', '中潭路', '长寿路', '昌化路', '静安寺', '常熟路', '肇嘉浜路', '东安路', '龙华中路', '后滩', '长清路', '耀华路', '云台路', '高科西路', '杨高南路', '锦绣路', '芳华路', '花木路', '龙阳路']
        },
        8: {
            name: '8号线',
            color: '#00A2E8',
            stations: ['市光路', '同济大学', '四平路', '鞍山新村', '江浦路', '黄兴路', '延吉中路', '黄兴公园', '翔殷路', '嫩江路', '市光路', '沈杜公路', '联航路', '江月路', '浦江镇', '芦恒路', '凌兆新村', '杨思', '成山路', '中华艺术宫', '西藏南路', '大世界', '老西门', '大豫园', '人民广场', '曲阜路', '中兴路', '虹口足球场', '曲阳路', '四平路', '鞍山新村']
        },
        9: {
            name: '9号线',
            color: '#93C01F',
            stations: ['松江南站', '醉白池', '松江体育中心', '松江新城', '松江大学城', '洞泾', '佘山', '泗泾', '九亭', '中春路', '七宝', '星中路', '合川路', '漕河泾开发区', '桂林路', '宜山路', '徐家汇', '肇嘉浜路', '嘉善路', '打浦桥', '马当路', '陆家浜路', '小南门', '商城路', '世纪大道', '杨高中路', '芳甸路', '碧云路', '平度路', '金桥', '台儿庄路', '蓝天路', '芳华路', '杨高中路']
        },
        10: {
            name: '10号线',
            color: '#C7003F',
            stations: ['基隆路', '港城路', '国帆路', '双江路', '高桥西', '高桥', '港城路', '上海科技馆', '南京东路', '豫园', '老西门', '新天地', '上海图书馆', '交通大学', '宋园路', '伊犁路', '水城路', '龙溪路', '上海动物园', '虹桥1号航站楼', '虹桥2号航站楼', '虹桥火车站']
        },
        11: {
            name: '11号线',
            color: '#8E24AA',
            stations: ['嘉定北', '嘉定', '嘉定新城', '马陆', '陈翔路', '南翔', '桃浦新村', '武威路', '祁连山路', '李子园', '上海西站', '枫桥路', '曹杨路', '隆德路', '江苏路', '交通大学', '上海图书馆', '陕西南路', '一大会址·新天地', '老西门', '豫园', '南京东路', '天潼路', '国际客运中心', '提篮桥', '大连路', '江浦公园', '宁国路', '隆昌路', '爱国路', '复兴岛', '东陆路', '昌吉东路', '上海赛车场']
        },
        12: {
            name: '12号线',
            color: '#007A61',
            stations: ['金海路', '申江路', '金京路', '杨高北路', '巨峰路', '东陆路', '五莲路', '博兴路', '金桥路', '云山路', '德平路', '北洋泾路', '民生路', '源深体育中心', '浦东大道', '大连路', '天潼路', '曲阜路', '汉中路', '南京西路', '陕西南路', '嘉善路', '漕宝路', '桂林公园', '漕河泾开发区', '虹梅路', '东兰路', '顾戴路', '虹莘路', '七莘路']
        },
        13: {
            name: '13号线',
            color: '#EF7B18',
            stations: ['金运路', '金沙江西路', '丰庄', '祁连山南路', '真北路', '大渡河路', '金沙江路', '隆德路', '武宁路', '江宁路', '自然博物馆', '淮海中路', '一大会址·新天地', '马当路', '世博会博物馆', '世博大道', '长清路', '成山路', '东明路', '高科西路', '华夏中路', '中科路', '学林路', '张江路']
        },
        14: {
            name: '14号线',
            color: '#7C85C2',
            stations: ['封浜', '乐秀路', '曹安公路', '真新新村', '真光路', '铜川路', '真如', '曹杨路', '中山北路', '天目西路', '静安寺', '黄陂南路', '大世界', '豫园', '陆家嘴', '浦东大道', '源深路', '昌邑路', '歇浦路', '海港大道', '共青森林公园']
        },
        15: {
            name: '15号线',
            color: '#D29DC3',
            stations: ['顾村公园', '刘行', '潘广路', '罗南新村', '美兰湖', '朱家角', '沈浜', '青浦新城', '漕盈路', '青浦汽车站', '青浦体育馆', '蟠祥路', '徐盈路', '徐泾北城', '嘉松中路', '赵家庄', '长江南路', '国权路', '同济大学', '四平路', '江浦公园', '歇浦路', '上海世博文化中心', '世博大道', '卢浦大桥', '南浦大桥', '陆家浜路', '豫园', '大豫园', '东方体育中心', '双柏路', '柏泾港', '锦秋路', '丰翔路', '场中路', '大华三路', '祁安路', '武威东路', '古浪路', '顾村公园']
        },
        16: {
            name: '16号线',
            color: '#16CCD9',
            stations: ['龙阳路', '华夏中路', '秀沿路', '罗山路', '周浦东', '鹤沙航城', '航头东', '新场', '野生动物园', '惠南', '惠南东', '书院', '临港大道', '滴水湖']
        },
        17: {
            name: '17号线',
            color: '#D79F00',
            stations: ['虹桥火车站', '诸光路', '蟠龙路', '徐盈路', '徐泾北城', '嘉松中路', '赵家庄', '汇金路', '青浦新城', '漕盈路', '青浦汽车站', '青浦体育馆', '朱家角', '东方绿舟']
        },
        18: {
            name: '18号线',
            color: '#D50032',
            stations: ['长江南路', '殷高路', '江杨南路', '抚顺路', '杨浦大桥', '平凉路', '江浦公园', '丹阳路', '昌邑路', '杨高中路', '迎春路', '龙阳路', '芳芯路', '白杨路', '莲溪路', '六里', '下沙', '航头']
        }
    },

    // 交汇站信息
    transferStations: {
        '人民广场': [1, 2, 8],
        '中山公园': [2, 3, 4],
        '上海火车站': [1, 3, 4],
        '虹桥火车站': [2, 10, 17],
        '世纪大道': [2, 4, 6, 9],
        '静安寺': [2, 7, 14],
        '徐家汇': [1, 9, 11],
        '宜山路': [3, 4, 9],
        '镇坪路': [3, 4, 7],
        '中潭路': [3, 4, 7],
        '曹杨路': [3, 4, 11, 14],
        '江苏路': [2, 11, 12],
        '陕西南路': [1, 10, 12],
        '东安路': [4, 7, 8],
        '肇嘉浜路': [9, 11],
        '龙阳路': [2, 7, 16, 18],
        '陆家嘴': [2, 14],
        '豫园': [10, 11, 14],
        '老西门': [8, 10],
        '大世界': [8, 14],
        '南京东路': [2, 10, 12],
        '天潼路': [12, 14],
        '曲阜路': [8, 12],
        '汉中路': [1, 12, 13],
        '南京西路': [2, 12, 13],
        '马当路': [9, 13],
        '嘉善路': [1, 12],
        '漕宝路': [1, 12],
        '金沙江路': [3, 4, 13],
        '隆德路': [11, 13],
        '武宁路': [13, 14],
        '江浦公园': [12, 18],
        '杨高中路': [9, 18],
        '昌邑路': [14, 18],
        '源深体育中心': [6, 14],
        '浦东大道': [4, 14],
        '大连路': [4, 12],
        '虹口足球场': [3, 8],
        '上海南站': [1, 3],
        '莘庄': [1, 5],
        '顾村公园': [7, 15],
        '成山路': [6, 8, 13],
        '高科西路': [6, 7, 13],
        '民生路': [6, 18],
        '巨峰路': [6, 12],
        '金桥路': [6, 12],
        '云山路': [6, 7],
        '德平路': [6, 12],
        '北洋泾路': [6, 12],
        '浦电路': [4, 6],
        '蓝村路': [4, 6],
        '上海科技馆': [2, 9],
        '杨思': [6, 8],
        '凌兆新村': [6, 8],
        '中华艺术宫': [8, 13],
        '世博大道': [8, 13],
        '长清路': [8, 13],
        '东明路': [8, 13],
        '华夏中路': [13, 16],
        '秀沿路': [16],
        '罗山路': [16],
        '周浦东': [16],
        '鹤沙航城': [16],
        '航头东': [16],
        '新场': [16],
        '野生动物园': [16],
        '惠南': [16],
        '惠南东': [16],
        '书院': [16],
        '临港大道': [16],
        '滴水湖': [16],
        '诸光路': [17],
        '蟠龙路': [17],
        '徐盈路': [17],
        '徐泾北城': [17],
        '嘉松中路': [17],
        '赵家庄': [17],
        '汇金路': [17],
        '青浦新城': [17],
        '漕盈路': [17],
        '青浦汽车站': [17],
        '青浦体育馆': [17],
        '朱家角': [17],
        '东方绿舟': [17],
        '长江南路': [3, 18],
        '殷高路': [18],
        '江杨南路': [18],
        '抚顺路': [18],
        '杨浦大桥': [18],
        '平凉路': [18],
        '丹阳路': [18],
        '迎春路': [18],
        '芳芯路': [18],
        '白杨路': [18],
        '莲溪路': [18],
        '六里': [18],
        '下沙': [18],
        '航头': [18]
    },

    // 站点在地图中的坐标位置（示例坐标）
    stationPositions: {
        // 1号线 (南北向主干线)
        '富锦路': {x: 1200, y: 60},
        '友谊西路': {x: 1200, y: 120},
        '宝安公路': {x: 1200, y: 180},
        '共富新村': {x: 1200, y: 240},
        '呼兰路': {x: 1200, y: 300},
        '通河新村': {x: 1200, y: 360},
        '共康路': {x: 1200, y: 420},
        '彭浦新村': {x: 1200, y: 480},
        '汶水路': {x: 1200, y: 540},
        '上海马戏城': {x: 1200, y: 600},
        '延长路': {x: 1200, y: 660},
        '中山北路': {x: 1200, y: 720},
        '火车站': {x: 1200, y: 780},
        '汉中路': {x: 1200, y: 840},
        '黄陂南路': {x: 1200, y: 900},
        '人民广场': {x: 1200, y: 960},
        '新闸路': {x: 1200, y: 1020},
        '陕西南路': {x: 1200, y: 1080},
        '黄山路': {x: 1200, y: 1140},
        '徐家汇': {x: 1200, y: 1200},
        '上海体育馆': {x: 1200, y: 1260},
        '漕宝路': {x: 1200, y: 1320},
        '上海南站': {x: 1200, y: 1380},
        '锦江乐园': {x: 1200, y: 1440},
        '莲花路': {x: 1200, y: 1500},
        '外环路': {x: 1200, y: 1560},
        '莘庄': {x: 1200, y: 1620},

        // 2号线 (东西向主干线)
        '徐泾东': {x: 60, y: 800},
        '虹桥火车站': {x: 120, y: 800},
        '虹桥2号航站楼': {x: 180, y: 800},
        '淞虹路': {x: 240, y: 800},
        '北新泾': {x: 300, y: 800},
        '威宁路': {x: 360, y: 800},
        '娄山关路': {x: 420, y: 800},
        '中山公园': {x: 480, y: 800},
        '江苏路': {x: 540, y: 800},
        '静安寺': {x: 600, y: 800},
        '南京西路': {x: 660, y: 800},
        '人民广场': {x: 720, y: 800},
        '南京东路': {x: 780, y: 800},
        '陆家嘴': {x: 840, y: 800},
        '东昌路': {x: 900, y: 800},
        '世纪大道': {x: 960, y: 800},
        '上海科技馆': {x: 1020, y: 800},
        '世纪公园': {x: 1080, y: 800},
        '龙阳路': {x: 1140, y: 800},
        '张江高科': {x: 1200, y: 800},

        // 3号线 (东北-西南向)
        '上海南站': {x: 1200, y: 1380},
        '石龙路': {x: 1140, y: 1320},
        '龙漕路': {x: 1080, y: 1260},
        '漕溪路': {x: 1020, y: 1200},
        '宜山路': {x: 960, y: 1140},
        '虹桥路': {x: 900, y: 1080},
        '延安西路': {x: 840, y: 1020},
        '中山公园': {x: 780, y: 960},
        '金沙江路': {x: 720, y: 900},
        '曹杨路': {x: 660, y: 840},
        '镇坪路': {x: 600, y: 780},
        '中潭路': {x: 540, y: 720},
        '上海火车站': {x: 480, y: 660},
        '宝山路': {x: 420, y: 600},
        '东宝兴路': {x: 360, y: 540},
        '虹口足球场': {x: 300, y: 480},
        '赤峰路': {x: 240, y: 420},
        '大柏树': {x: 180, y: 360},
        '江湾镇': {x: 120, y: 300},
        '殷高西路': {x: 60, y: 240},
        '长江南路': {x: 60, y: 180},
        '淞发路': {x: 60, y: 120},
        '张华浜': {x: 60, y: 60},

        // 4号线 (环线)
        '宜山路': {x: 960, y: 1140},
        '虹桥路': {x: 900, y: 1080},
        '延安西路': {x: 840, y: 1020},
        '中山公园': {x: 780, y: 960},
        '金沙江路': {x: 720, y: 900},
        '曹杨路': {x: 660, y: 840},
        '镇坪路': {x: 600, y: 780},
        '中潭路': {x: 540, y: 720},
        '上海火车站': {x: 480, y: 660},
        '宝山路': {x: 420, y: 600},
        '海伦路': {x: 360, y: 540},
        '临平路': {x: 300, y: 480},
        '大连路': {x: 240, y: 420},
        '杨树浦路': {x: 180, y: 360},
        '浦东大道': {x: 120, y: 300},
        '世纪大道': {x: 60, y: 240},
        '浦电路': {x: 60, y: 180},
        '蓝村路': {x: 60, y: 120},
        '塘桥': {x: 60, y: 60},

        // 5号线 (南北向)
        '莘庄': {x: 1200, y: 1620},
        '春申路': {x: 1200, y: 1560},
        '银都路': {x: 1200, y: 1500},
        '颛桥': {x: 1200, y: 1440},
        '北桥': {x: 1200, y: 1380},
        '剑川路': {x: 1200, y: 1320},
        '东川路': {x: 1200, y: 1260},
        '金平路': {x: 1200, y: 1200},
        '华宁路': {x: 1200, y: 1140},
        '文井路': {x: 1200, y: 1080},
        '闵行开发区': {x: 1200, y: 1020}
    },

    // 获取所有站点
    getAllStations() {
        const allStations = [];
        const addedStations = new Set();
        
        for (const lineId in this.lines) {
            const line = this.lines[lineId];
            line.stations.forEach((station, index) => {
                if (!addedStations.has(station)) {
                    const isTransfer = this.transferStations[station] ? true : false;
                    allStations.push({
                        name: station,
                        line: lineId,
                        lineColor: line.color,
                        isTransfer: isTransfer,
                        transferLines: this.transferStations[station] || [lineId]
                    });
                    addedStations.add(station);
                }
            });
        }
        return allStations;
    },

    // 获取特定线路的所有站点
    getLineStations(lineId) {
        if (!this.lines[lineId]) return [];
        return this.lines[lineId].stations.map((station, index) => ({
            name: station,
            line: lineId,
            lineColor: this.lines[lineId].color,
            index: index,
            isTransfer: this.transferStations[station] ? true : false,
            transferLines: this.transferStations[station] || [lineId]
        }));
    },

    // 使用BFS算法计算最短路径
    findShortestPath(startStation, endStation) {
        if (startStation === endStation) return [];
        
        const visited = new Set();
        const queue = [{station: startStation, path: [startStation], transfers: 0}];
        
        while (queue.length > 0) {
            const {station, path, transfers} = queue.shift();
            
            if (station === endStation) {
                return path.map(stationName => {
                    const stationInfo = this.getStationInfo(stationName);
                    return stationInfo;
                });
            }
            
            if (visited.has(station)) continue;
            visited.add(station);
            
            // 获取相邻站点
            const neighbors = this.getNeighborStations(station);
            
            for (const neighbor of neighbors) {
                if (!visited.has(neighbor)) {
                    queue.push({
                        station: neighbor,
                        path: [...path, neighbor],
                        transfers: transfers + (this.transferStations[neighbor] ? 1 : 0)
                    });
                }
            }
        }
        
        return []; // 找不到路径
    },

    // 获取相邻站点
    getNeighborStations(stationName) {
        const neighbors = [];
        
        for (const lineId in this.lines) {
            const stations = this.lines[lineId].stations;
            const index = stations.indexOf(stationName);
            
            if (index !== -1) {
                // 前一站
                if (index > 0) {
                    neighbors.push(stations[index - 1]);
                }
                // 后一站
                if (index < stations.length - 1) {
                    neighbors.push(stations[index + 1]);
                }
            }
        }
        
        return [...new Set(neighbors)];
    },

    // 获取站点信息
    getStationInfo(stationName) {
        for (const lineId in this.lines) {
            const stations = this.lines[lineId].stations;
            if (stations.includes(stationName)) {
                return {
                    name: stationName,
                    line: lineId,
                    lineColor: this.lines[lineId].color,
                    isTransfer: this.transferStations[stationName] ? true : false,
                    transferLines: this.transferStations[stationName] || [lineId]
                };
            }
        }
        return null;
    },

    // 计算两个站点之间的距离
    getDistance(station1, station2) {
        const path = this.findShortestPath(station1, station2);
        return path.length > 0 ? path.length - 1 : 0;
    },

    // 获取站点路径
    getPath(startStation, endStation) {
        return this.findShortestPath(startStation, endStation);
    }
};

// 导出数据
if (typeof module !== 'undefined' && module.exports) {
    module.exports = SHANGHAI_METRO;
}